<!doctype html><html><head><title>备忘杂记 :: 闲一文档</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2020-12-15T10:01:55 UTC"><meta name=description content><title>备忘杂记 :: 闲一文档</title><link rel="shortcut icon" href=/wedoc/images/favicon.png type=image/x-icon><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css><script src=https://code.jquery.com/jquery-3.5.1.min.js></script><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/layout.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/css/style.main.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/css/style.menu.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/notice.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/tabs.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/panel.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/columns.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/children.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/attachments.css><link rel=stylesheet type=text/css href=https://xianii.gitee.io/wedoc/sass/shortcodes/alert.css><link rel=stylesheet type=text/css href=/wedoc/css/docport.css><script src=/wedoc/js/docport.js></script><script type=text/javascript>var baseurl="https:\/\/xianii.gitee.io\/wedoc\/";</script><script>MathJax={tex:{inlineMath:[['$','$']],displayMath:[["$$","$$"]]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-svg.js></script></head><body data-url=/wedoc/notes/memo/><style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style><header><div><div class=burger><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a></div><div><a class=baselink href=https://xianii.gitee.io/wedoc/>闲一文档</a></div></div></header><article><aside><div class=search><div class=searchbox><input data-search-input id=search-by type=text placeholder="Type to search..."></div><script type=text/javascript src=/wedoc/vendor/lunr/lunr.min.js></script><script type=text/javascript src=/wedoc/vendor/auto-complete/auto-complete.js></script><link href=/wedoc/vendor/auto-complete/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https:\/\/xianii.gitee.io\/wedoc\/";</script><script type=text/javascript src=/wedoc/js/search.js></script></div><div id=close_menu><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')"><i class="fa fa-lg fa-times"></i></a></div><ul class=menu><li data-nav-id=https://xianii.gitee.io/wedoc/docs/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/wedoc/docs/>开发环境</a><ul><li data-nav-id=https://xianii.gitee.io/wedoc/docs/tools/ class="dd-item
item_level_$level"><a href=/wedoc/docs/tools/>工具链安装</a></li></ul></li><li data-nav-id=https://xianii.gitee.io/wedoc/notes/ class="dd-item parent active
item_level_$level"><a href=/wedoc/notes/>指导笔记</a></li><li data-nav-id=https://xianii.gitee.io/wedoc/usage/ class="dd-item
item_level_$level"><a href=/wedoc/usage/>模板用例</a></li></ul></aside><section class=page><nav id=ariane aria-label=breadcrumb><ol class=ariane><li><a class=text-link href=https://xianii.gitee.io/wedoc/>Home</a></li><li><a class=text-link href=/wedoc/notes/>指导笔记</a></li><li class=active>备忘杂记</li></ol></nav><h1>指导笔记<span>备忘杂记</span></h1><nav class=subpages><li><a title=$pagetitle href=/wedoc/notes/nrf52note/>nRF52开发笔记</a></li><li><a title=$pagetitle href=/wedoc/notes/zephyrnote/>Zephyr笔记</a></li><li class=active><a title=$pagetitle href=/wedoc/notes/memo/>备忘杂记</a></li></nav><div class=jump-to-section><span onclick="$h=$(this);$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><span class="fas fa-align-right"></span>Jump to Section
<i class="fas fa-chevron-right"></i></span><nav id=TableOfContents><ul><li><a href=#zsh--oh-my-zsh--theme>zsh + oh my zsh + theme</a><ul><li><a href=#安装主题>安装主题</a></li></ul></li><li><a href=#gdbgui--arm-cross-debug>gdbgui + arm cross debug</a></li><li><a href=#gitea添加tex支持>Gitea添加TeX支持</a></li><li><a href=#qnap-arm-nas定期删除文件>Qnap ARM NAS定期删除文件</a></li></ul></nav></div><div class=content><h2 ref=zsh--oh-my-zsh--theme>zsh + oh my zsh + theme</h2><a class=anchor id=zsh--oh-my-zsh--theme></a><p>首先：<code>sudo apt install zsh -y</code></p><p>然后：<code>wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh</code> 下载安装脚本。由于魔女结界的存在，可能需要使用爱与魔法。</p><p><code>chmod +x install.sh</code> 最后运行安装脚本即可。</p><h3 ref=安装主题>安装主题</h3><a class=anchor id=安装主题></a><p><code>git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k</code></p><p>然后：修改 <code>~/.zshrc</code> 的 <code>ZSH_THEME="powerlevel10k/powerlevel10k"</code></p><p>处于魔女结界内的用户可以使用 <code>gitee</code> 源替代：<code>git clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k</code></p><p>重启 <code>shell</code>，运行 <code>zsh</code> 进行配置。</p><h2 ref=gdbgui--arm-cross-debug>gdbgui + arm cross debug</h2><a class=anchor id=gdbgui--arm-cross-debug></a><p>安装 <code>gdbgui</code>: <a href>https://www.gdbgui.com/installation/</a></p><p>然后需要编译一个交叉调试版本的 <code>gdb</code>。
首先下载 <code>gdb</code> 源码：<a href>https://www.gnu.org/software/gdb/download/</a></p><p>解压源码，进入源码目录。</p><p>安装编译依赖：<code>sudo apt install texinfo</code></p><p>以 <code>linux</code> 调试 <code>arm</code> 为例：<br>执行 <code>./configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --target=arm-none-eabi</code> 配置编译参数。<br>编译 <code>make -j8</code><br>安装 <code>sudo make install</code></p><p>经过以上步骤，就可以使用编译好的 <code>linux->arm</code> 版本的 <code>gdb</code> 了。</p><p>最后使用 <code>gdbgui -g arm-none-eabi-gdb</code> 来启动 <code>gdbgui</code> 就行了。</p><h2 ref=gitea添加tex支持>Gitea添加TeX支持</h2><a class=anchor id=gitea添加tex支持></a><p>例: $CheckSum = \sum_5^n n \oplus A_n$ 和 $x = {-b \pm \sqrt{b^2-4ac} \over 2a}$</p><p>在<code>templates/custom</code>目录下新建<code>header.tmpl</code>，内容如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>script</span>&gt;
<span style=color:#a6e22e>MathJax</span> <span style=color:#f92672>=</span> {
  <span style=color:#a6e22e>tex</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>inlineMath</span><span style=color:#f92672>:</span> [[<span style=color:#e6db74>&#39;$&#39;</span>, <span style=color:#e6db74>&#39;$&#39;</span>], [<span style=color:#e6db74>&#39;\\(&#39;</span>, <span style=color:#e6db74>&#39;\\)&#39;</span>]],
    <span style=color:#a6e22e>displayMath</span><span style=color:#f92672>:</span> [[<span style=color:#e6db74>&#34;$$&#34;</span>, <span style=color:#e6db74>&#34;$$&#34;</span>], [<span style=color:#e6db74>&#34;\\[&#34;</span>, <span style=color:#e6db74>&#34;\\]&#34;</span>]]
  },
  <span style=color:#a6e22e>svg</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>fontCache</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;global&#39;</span>
  }
};
&lt;/<span style=color:#f92672>script</span>&gt;
&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/javascript&#34;</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;MathJax-script&#34;</span> <span style=color:#a6e22e>async</span>
  <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-svg.js&#34;</span>&gt;
&lt;/<span style=color:#f92672>script</span>&gt;
</code></pre></div><p>渲染方式可以更改为如下面的其他方式等：</p><ul><li><code>&lt;script src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-chtml.js">&lt;/script></code></li><li><code>&lt;script src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-mml-svg.js">&lt;/script></code></li><li><code>&lt;script src="https://cdn.bootcdn.net/ajax/libs/mathjax/3.0.5/es5/tex-mml-chtml.js">&lt;/script></code></li></ul><h2 ref=qnap-arm-nas定期删除文件>Qnap ARM NAS定期删除文件</h2><a class=anchor id=qnap-arm-nas定期删除文件></a><p>在大多数桌面版 Linux 中会使用 <code>crontab -e</code> 来编辑 crontab 配置，但是注意<strong>不要在威联通中使用这种方法</strong>，威联通在重启的时候会覆盖使用这种方式写入的配置。如果想要永久的保存配置，应该使用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>vi /etc/config/crontab
</code></pre></div><p>然后写入配置，比如</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>4</span> * * * /share/homes/account/scripts.sh
</code></pre></div><blockquote><p>另外需要注意别忘记添加可执行权限 chmod +x filename.sh</p></blockquote><p>重启 crontab</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>crontab /etc/config/crontab <span style=color:#f92672>&amp;&amp;</span> /etc/init.d/crond.sh restart
</code></pre></div><p>删除文件脚本如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e>#!/bin/bash 
</span><span style=color:#75715e></span>keep_days<span style=color:#f92672>=</span><span style=color:#ae81ff>7</span>
log_path<span style=color:#f92672>=</span>/share/临时文件共享/

find $log_path -type f -mtime +$keep_days -print0 |
<span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span> read -r -d <span style=color:#e6db74>&#39;&#39;</span> file; <span style=color:#66d9ef>do</span>
rm -f <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
<span style=color:#66d9ef>done</span>

find $log_path -type d -print0 |
sort -nzr |
<span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span> read -r -d <span style=color:#e6db74>&#39;&#39;</span> dir; <span style=color:#66d9ef>do</span>
rmdir --ignore-fail-on-non-empty <span style=color:#e6db74>&#34;</span>$dir<span style=color:#e6db74>&#34;</span>
<span style=color:#66d9ef>done</span>
</code></pre></div></div><div class=chevrons><a class=next href=/wedoc/usage/ title=模板用例 style=margin-right:0><div><p>Next page</p><label>模板用例</label></div><i class="fas fa-arrow-right" style=font-size:1.7em></i></a></div></section><section class=right-menu><div class=TableOfContents><label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label><nav><ul><li><a href=/wedoc/notes/memo/>备忘杂记</a></li></ul></nav><nav id=TableOfContents><ul><li><a href=#zsh--oh-my-zsh--theme>zsh + oh my zsh + theme</a><ul><li><a href=#安装主题>安装主题</a></li></ul></li><li><a href=#gdbgui--arm-cross-debug>gdbgui + arm cross debug</a></li><li><a href=#gitea添加tex支持>Gitea添加TeX支持</a></li><li><a href=#qnap-arm-nas定期删除文件>Qnap ARM NAS定期删除文件</a></li></ul></nav></div><div class=Actions><nav><ul></ul></nav></div></section></article><footer><p>&mldr;</p></footer></body></html>